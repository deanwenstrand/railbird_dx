type: action
name: complete
description: "Complete current agent's task and return results to parent"
version: 1.0
agent_access: ["crm_coordinator"]

# LLM Integration Metadata
ai:
  when_to_use: "When current agent has finished its assigned task and should return results to parent agent"
  examples:
    - "I have successfully changed the background to green"
    - "The email has been sent to all contacts"
    - "User data has been updated as requested"
  effect: system
  priority: highest
  tags: ["completion", "task", "result", "system"]
  completion_behavior: stop_agent_runtime

# Input Schema
inputs:
  summary:
    type: string
    required: true
    description: "Clear summary of what this agent accomplished"
    examples: 
      - "Background changed to green successfully"
      - "Email sent to 15 contacts"
      - "User profile updated"
      
  result:
    type: object
    required: false
    description: "Structured result data to pass to parent agent"
    properties:
      action_taken:
        type: string
        description: "Primary action that was completed"
      components_affected:
        type: array
        description: "List of system components that were modified"
      data_returned:
        type: object
        description: "Any data or artifacts created"
        
  success:
    type: boolean
    required: false  
    default: true
    description: "Whether the task was completed successfully"

# System implementation - this is handled by agent runtime
implementation:
  type: system_control
  behavior: stop_current_agent

# Output Schema - what gets returned to parent
outputs:
  agent_task_complete:
    type: boolean
    description: "Flag indicating agent runtime should stop"
  summary:
    type: string
    description: "Summary of completed work"
  result:
    type: object
    description: "Structured results for parent agent"
  success:
    type: boolean
    description: "Task completion status"
  agent_name:
    type: string
    description: "Name of agent that completed the task"
  steps_taken:
    type: number
    description: "Number of steps executed by this agent"